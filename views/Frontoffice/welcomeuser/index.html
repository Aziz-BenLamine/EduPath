<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Welcome</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
      }

      #logoutButton {
        position: absolute;
        top: 10px;
        left: 10px;
        background-color: rgba(129, 119, 119, 0.342);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 1em;
        cursor: pointer;
      }
      #logoutButton:hover {
        background-color: rgba(251, 231, 231, 0.827);
      }
    </style>
  </head>
  <body>
    <div class="aqua">
      <span class="percentBar"><h3 class="number">0%</h3></span>
    </div>
    <h2>Welcome, <span id="username"></span>!</h2>
    <button id="logoutButton">Log Out</button>

    <script>
      let i = 0;
      let h2 = document.querySelector("h2");
      let aqua = document.querySelector(".aqua");
      let body = document.querySelector("body");
      let number = document.querySelector(".number");
      let percentBar = document.querySelector(".percentBar");

      // Get username from URL query parameters
      const params = new URLSearchParams(window.location.search);
      const username = params.get("username") || "Guest"; // Default to "Guest" if no username
      document.getElementById("username").textContent = username;

      let interval = setInterval(function () {
        number.innerHTML = i + "<span>%</span>";
        percentBar.style.width = i + "%";
        i++;
        if (i == 101) {
          clearInterval(interval);
          setTimeout(function () {
            aqua.style.opacity = "0";
            aqua.style.visibility = "hidden";
            body.style.background = "#7494ec";
            h2.style.opacity = "1";
            h2.style.visibility = "visible";
            window.location.href = "http://localhost/Edupath";
          }, 500); // Added duration for the timeout
        }
      }, 50);

      // Log Out button functionality
      document
        .getElementById("logoutButton")
        .addEventListener("click", function () {
          // Redirect to the specified URL
          window.location.href = "http://http://localhost/EduPath/";
        });
    </script>
  </body>
</html>
